
ENTRY(gettime)
    #stack frame setup
    pushl %ebp      
    movl %esp,%ebp # ebp<--esp
    
    #gettime has no parameters
    #no need to pushl all the CPU registers

    # System call number in eax (10 for gettime)
    movl $10, %eax

    #Generate the trap or use Fast Syscall (sysenter)
    int $0x80
    #SYSENTER #Not implemented yet 
    
    # Error checking
    testl %eax, %eax
    jns gettime_correct    # Jump if not negative (no error)
    
    # Error case
    negl %eax #Absolute value
    movl %eax, errno
    movl $-1, %eax
    
 gettime_correct:
    # Stack frame cleanup
    movl %ebp, %esp
    popl %ebp
    ret


   